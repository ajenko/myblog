{% extends "base.html" %}
{% load static from staticfiles %}
{% load i18n %}
{% load ratings %}
{% load sidebar %}
{% load pagenav %}

{% block meta_title %}The List of Posts{% endblock meta_title %}


{% block content %}
<div class="row justify-content-center">
<div class="col-8">
<div class='infinite'">

  <br>

  	<!-- A list of posts -->
	{% for obj in object_list %}
	<div class="infinite-item"}>

	<!-- A post is a draft or/and a a future post --> 
	{% if obj.draft %}<span style="color:red;">{% trans "Draft"%}</span><br>{% endif %}
	{% if obj.publish > today %}<span style="color:red;">{% trans "It`s a Future Post" %}</span>{% endif%}

	<!-- A post title -->
	<h3><a href="{{ obj.get_absolute_url }}">{{ obj.title }}</a></h3>


	<!-- A post datetime stamp -->
	<p>{{ obj.datetime_stamp|timesince }} {% trans "ago" %} | 

	<!-- A post category -->
	{% if obj.category %}{{ obj.category }}{% endif %} |

	<!-- A post author -->
	{% if obj.user.get_full_name %}{% trans "Author" %}: <a href="{% url "profile_users" obj.user.username %}">{{ obj.user.get_full_name }}</a>
	{% else %}{% trans "Author" %}: <a href="{% url "profile_users" obj.user.username %}">{{ obj.user }}</a>{% endif %}</p>

	<!-- A post datetime updated stamp -->
	{% if obj.updated > obj.datetime_stamp %}
	<p>Updated: {{ obj.updated|timesince }} {% trans "ago" %}</p>
	{% endif %}

	<!-- A post star ratings -->
	{% if not obj.draft and not obj.publish > today %}
	<p>{% ratings obj %}</p>
	{% endif %}
	<!-- A post reading time -->
	{% if obj.read_time <= 1 %}<p>{% blocktrans %}< 1 minute read {% endblocktrans %}</p>
	{% elif obj.read_time < 10 %}<p>{% blocktrans %}< 10 minutes read{% endblocktrans %}</p>
	{% else %}<p>{% blocktrans %}{{ obj.read_time }} minutes read{% endblocktrans %}</p>
	{% endif %}
	
	<!-- A post image -->
	{% if obj.image %}
	<a href="{{ obj.get_absolute_url }}"><img src="{{ obj.image.url }}" class="img-thumbnail"></a>
	{% endif %}

	<!-- A post content -->
	<div class="content-item">
		<br>
	{{ obj.get_markdown|truncatechars:120 }}
	</div>
		<br>

	<!-- The view button -->	
	<a class="btn btn-info" href="{{ obj.get_absolute_url }}" title="{{ obj.title }}" role="button">{% trans "View" %}</a>
	<hr>
	</div>

	<!-- If no posts in a list -->
	{% empty %}
	<p>Sorry, there are no posts here..</p>
	{% endfor %}
	<br>

<!-- A posts list pagination -->
{% pagenav object_list is_paginated paginator %}
	<br>
</div>

<!-- To the Top Button -->
<button onclick="topFunction()" id="myBtnToTop" title="Go to top"><img width="30" height="30" src="{% static "img/arrow.png" %}"></button>
	
</div>
	<!-- A navigation sidebar -->
	<div class="col-12 col-md-4">
	{% sidebar_nav %}
	</div>
	
</div>
{% endblock %}